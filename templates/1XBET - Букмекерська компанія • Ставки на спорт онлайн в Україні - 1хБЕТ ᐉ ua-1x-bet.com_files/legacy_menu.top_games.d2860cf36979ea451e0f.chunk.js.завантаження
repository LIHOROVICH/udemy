(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[1039],{3148:function(t,e,s){"use strict";s.r(e);var n=s(717),a={components:{"top-games-game":function(){return s.e(1038).then(s.bind(null,3194))}},props:{storage_name:{type:String}},data:function(){return{games:[],xhr:null,timerId:0,is_open:!1}},computed:{_games:function(){return this.games},_is_compact:function(){return!this.$store.state.GLOBAL.compact_view&&this.$store.state.GLOBAL.window_width<=1366}},watch:{storage_name:function(){this.timerId&&clearInterval(this.timerId),this.xhr&&this.xhr.abort(),this.getGames()},_games:function(t,e){if(t.length!==e.length){var s=this;Vue.nextTick((function(){setTimeout((function(){s.$store.commit("menu/update_scrollbar")}),1e3)}))}}},beforeMount:function(){var t=this;"undefined"!=typeof localforage&&localforage.getItem("is_open_top_games").then((function(e){t.is_open=null===e?181!==t.$store.state.GLOBAL.partnerId:e})),this.getGames()},beforeDestroy:function(){clearInterval(this.timerId)},methods:{getUrl:function(){return this.isLive()?"/LiveFeed/GetTopGamesStatZip":"/LineFeed/GetTopGamesStatZip"},getRequest:function(){var t=this;return new ES6Promise((function(e,s){var a=Object(n.b)(t.getUrl()),i=[];t.isLive()?(i=t.$store.state.GLOBAL.antisports_live.length?t.$store.state.GLOBAL.antisports_live.split("|"):[]).length&&(i=i.map((function(t){return parseInt(t)}))):(i=t.$store.state.GLOBAL.antisports_line.length?t.$store.state.GLOBAL.antisports_line.split("|"):[]).length&&(i=i.map((function(t){return parseInt(t)}))),i.length&&(i=i.map((function(t){return parseInt(t)})).sort((function(t,e){return t-e})),a.add("antisports",i)),a.add("cyberFlag",t.$store.getters.get_cyber_type),a.add("partner",t.$store.state.GLOBAL.partnerId),a.add("lng",t.$store.state.GLOBAL.lng),a.add("cfview",t.$store.state.GLOBAL.cfview),t.$store.getters.getCfParam&&a.add("userId",t.$store.state.GLOBAL.userId),73!==t.$store.state.GLOBAL.refId||t.$store.state.GLOBAL.userId||a.add("notLogin",!0),t.xhr=$.ajax({url:t.getUrl(),data:Object(n.a)(a),success:function(s){s&&s.Value&&s.Value.length&&(t.games=s.Value.map((function(t){return unZip(t)})),t.$store.commit("menu/setTopGames",{storage_name:t.storage_name,games:t.games}),e())},error:function(e){t.$store.dispatch("handleAjaxError",{jqXHR:e,context:this},{root:!0})}})}))},getUpdateTime:function(){return this.isLive()?1e4:6e4},getGames:function(){var t=this;t.getRequest().then((function(){t.timerId=setInterval((function(){t.getRequest()}),t.getUpdateTime())}))},toggleBlock:function(){var t=this;this.is_open=!this.is_open,localforage.setItem("is_open_top_games",this.is_open),Vue.nextTick((function(){t.$store.commit("menu/update_scrollbar")}))},isLive:function(){return this.$store.getters["menu/is_live"](this.storage_name)}}},i=s(26),r=Object(i.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ls-panel"},[s("div",{staticClass:"ls-panel__head"},[s("div",{staticClass:"ls-panel__icon ls-panel__icon_games"}),t._v(" "),s("div",{staticClass:"ls-panel__title"},[t._v("\n            "+t._s(t.$T("leftmenu_top_games"))+"\n        ")]),t._v(" "),s("button",{staticClass:"ls-panel__open",class:{"ls-panel__open_active":t.is_open},attrs:{title:t.$T("show_hide_all")},on:{click:t.toggleBlock}})]),t._v(" "),t.is_open?s("div",{staticClass:"ls-panel__body"},t._l(t._games,(function(e){return s("top-games-game",{key:e.Id,attrs:{game:e,is_compact:t._is_compact,storage_name:t.storage_name}})})),1):t._e()])}),[],!1,null,null,null);e.default=r.exports}}]);